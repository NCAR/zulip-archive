<html>
<head><meta charset="utf-8"><title>PFT to sparse conversion · python-questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="../../..//stream/10-python-questions/index.html">python-questions</a></h2>
<h3>Topic: <a href="../../..//stream/10-python-questions/topic/PFT.20to.20sparse.20conversion.html">PFT to sparse conversion</a></h3>

<hr>


<head><link href="../../../style.css" rel="stylesheet"></head>

<a name="74076"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/PFT%20to%20sparse%20conversion/near/74076" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Montasir Maruf <a href="../../..//stream/10-python-questions/topic/PFT.20to.20sparse.20conversion.html#74076">(Feb 09 2023 at 18:32)</a>:</h4>
<p>I am trying to convert 2D variables to 3D. I have attached my data details here. //convert_pft_variables_to_sparse(data, pftnames)// in this function which argument should I used instead of pdfnames? I have also attached the error message <a href="../../../user_uploads/2/44/vCLW634HP9ufp16utcOaHG1D/Capture.JPG">Capture.JPG</a> <a href="../../../user_uploads/2/5a/ww0_jDkZxg5NsD0wnxhJnjT2/error.JPG">error.JPG</a></p>
<div class="message_inline_image"><a href="../../../user_uploads/2/44/vCLW634HP9ufp16utcOaHG1D/Capture.JPG" title="Capture.JPG"><img src="../../../user_uploads/2/44/vCLW634HP9ufp16utcOaHG1D/Capture.JPG"></a></div><div class="message_inline_image"><a href="../../../user_uploads/2/5a/ww0_jDkZxg5NsD0wnxhJnjT2/error.JPG" title="error.JPG"><img src="../../../user_uploads/2/5a/ww0_jDkZxg5NsD0wnxhJnjT2/error.JPG"></a></div>



<a name="74180"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/PFT%20to%20sparse%20conversion/near/74180" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Katie Dagon <a href="../../..//stream/10-python-questions/topic/PFT.20to.20sparse.20conversion.html#74180">(Feb 10 2023 at 20:15)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="164">@Montasir Maruf</span>, I was just discussing this issue with <span class="user-mention" data-user-id="34">@Stephen Yeager</span> who is looking at some CLM4 output that is indexed by the <code>lndgrid</code> dimension. It looks like you are using code from the <a href="https://ncar.github.io/esds/posts/2022/sparse-PFT-gridding/">sparse-PFT-gridding notebook</a> which works when you have CLM output indexed by <code>pft</code>. Unfortunately it won't work in this case with the indexing by <code>lndgrid</code>. It also looks like your data is indexed by <code>ncol</code> in which case it would be quite analogous to working with CAM-SE output.</p>
<p><span class="user-mention" data-user-id="34">@Stephen Yeager</span> came up with a workaround similar to how remapping is done for CAM-SE output that I believe he already shared with you, but I'll post here so everyone else can see the solution: <code>/glade/u/home/yeager/analysis/python/toshare/CLM_field_regrid.ipynb</code></p>



<a name="74200"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/PFT%20to%20sparse%20conversion/near/74200" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Montasir Maruf <a href="../../..//stream/10-python-questions/topic/PFT.20to.20sparse.20conversion.html#74200">(Feb 13 2023 at 16:31)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="47">@Katie Dagon</span> thank you for sharing the script!</p>



<hr><p>Last updated: May 16 2025 at 17:14 UTC</p>
</html>