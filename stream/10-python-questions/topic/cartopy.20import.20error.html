<html>
<head><meta charset="utf-8"><title>cartopy import error · python-questions · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://127.0.0.1:4000/html/stream/10-python-questions/index.html">python-questions</a></h2>
<h3>Topic: <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html">cartopy import error</a></h3>

<hr>

<base href="https://zulip2.cloud.ucar.edu">

<head><link href="http://127.0.0.1:4000/style.css" rel="stylesheet"></head>

<a name="10814"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10814" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10814">(Jun 09 2020 at 13:29)</a>:</h4>
<p>I recently updated my environment and get the following error on importing <code>cartopy</code>:</p>
<div class="codehilite"><pre><span></span><span class="o">---------------------------------------------------------------------------</span>
<span class="ne">ImportError</span>                               <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">b0688681af7f</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
     <span class="mi">12</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
     <span class="mi">13</span>
<span class="o">---&gt;</span> <span class="mi">14</span> <span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
     <span class="mi">15</span> <span class="kn">from</span> <span class="nn">cartopy.util</span> <span class="kn">import</span> <span class="n">add_cyclic_point</span>
     <span class="mi">16</span> <span class="kn">import</span> <span class="nn">cmocean</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">mclong</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">krill</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">cartopy</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
     <span class="mi">94</span> <span class="c1"># Commonly used sub-modules. Imported here to provide end-user</span>
     <span class="mi">95</span> <span class="c1"># convenience.</span>
<span class="o">---&gt;</span> <span class="mi">96</span> <span class="kn">import</span> <span class="nn">cartopy.crs</span>
     <span class="mi">97</span> <span class="kn">import</span> <span class="nn">cartopy.feature</span>  <span class="c1"># noqa: F401  (flake8 = unused import)</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">mclong</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">krill</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">cartopy</span><span class="o">/</span><span class="n">crs</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
     <span class="mi">34</span> <span class="kn">import</span> <span class="nn">six</span>
     <span class="mi">35</span>
<span class="o">---&gt;</span> <span class="mi">36</span> <span class="kn">from</span> <span class="nn">cartopy._crs</span> <span class="kn">import</span> <span class="p">(</span><span class="n">CRS</span><span class="p">,</span> <span class="n">Geodetic</span><span class="p">,</span> <span class="n">Globe</span><span class="p">,</span> <span class="n">PROJ4_VERSION</span><span class="p">,</span>
     <span class="mi">37</span>                           <span class="n">WGS84_SEMIMAJOR_AXIS</span><span class="p">,</span> <span class="n">WGS84_SEMIMINOR_AXIS</span><span class="p">)</span>
     <span class="mi">38</span> <span class="kn">from</span> <span class="nn">cartopy._crs</span> <span class="kn">import</span> <span class="n">Geocentric</span>  <span class="c1"># noqa: F401 (flake8 = unused import)</span>

<span class="ne">ImportError</span><span class="p">:</span> <span class="n">libproj</span><span class="o">.</span><span class="n">so</span><span class="o">.</span><span class="mi">19</span><span class="p">:</span> <span class="n">cannot</span> <span class="nb">open</span> <span class="n">shared</span> <span class="nb">object</span> <span class="n">file</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">file</span> <span class="ow">or</span> <span class="n">directory</span>
</pre></div>


<p>Has anyone encountered this? Solutions?</p>



<a name="10815"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10815" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10815">(Jun 09 2020 at 13:42)</a>:</h4>
<p>I am on somewhat up-to-date versions of <code>cartopy</code> and <code>proj</code> and things seem to work fine ( I tested the import)</p>
<div class="codehilite"><pre><span></span>$ conda list cartopy
<span class="c1"># packages in environment at /glade/work/abanihi/softwares/miniconda3/envs/analysis:</span>
<span class="c1">#</span>
<span class="c1"># Name                    Version                   Build  Channel</span>
cartopy                   <span class="m">0</span>.18.0           py37h4b180d9_0    conda-forge

abanihi at casper26 in ~
$ conda list proj
<span class="c1"># packages in environment at /glade/work/abanihi/softwares/miniconda3/envs/analysis:</span>
<span class="c1">#</span>
<span class="c1"># Name                    Version                   Build  Channel</span>
proj                      <span class="m">7</span>.0.0                h966b41f_4    conda-forge
pyproj                    <span class="m">2</span>.6.1.post1      py37h34dd122_0    conda-forge
</pre></div>


<p>I am curious... Did you pin your <code>proj</code> and <code>pyproj</code> versions? They are a little outdated:</p>
<div class="codehilite"><pre><span></span>abanihi at casper26 in ~
$ conda list cartopy
<span class="c1"># packages in environment at /glade/work/mclong/miniconda3/envs/krill:</span>
<span class="c1">#</span>
<span class="c1"># Name                    Version                   Build  Channel</span>
cartopy                   <span class="m">0</span>.18.0           py37h4b180d9_0    conda-forge

abanihi at casper26 in ~
$ conda list proj
<span class="c1"># packages in environment at /glade/work/mclong/miniconda3/envs/krill:</span>
<span class="c1">#</span>
<span class="c1"># Name                    Version                   Build  Channel</span>
proj                      <span class="m">6</span>.3.1                hc80f0dc_1    conda-forge
pyproj                    <span class="m">2</span>.5.0            py37he3cd046_1    conda-forge
</pre></div>



<a name="10816"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10816" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10816">(Jun 09 2020 at 13:46)</a>:</h4>
<p>no, I did not pin my <code>proj</code> and <code>pyproj</code> versions, but I bet that this is the problem.  I don't include them in my specific list of dependencies.</p>



<a name="10817"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10817" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10817">(Jun 09 2020 at 13:48)</a>:</h4>
<p>Here's the environment: <a href="https://github.com/matt-long/krill-cesm-le/blob/master/environment/environment.yml" target="_blank" title="https://github.com/matt-long/krill-cesm-le/blob/master/environment/environment.yml">https://github.com/matt-long/krill-cesm-le/blob/master/environment/environment.yml</a></p>



<a name="10818"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10818" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10818">(Jun 09 2020 at 13:48)</a>:</h4>
<p>Can you suggest a modification?</p>



<a name="10819"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10819" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10819">(Jun 09 2020 at 13:48)</a>:</h4>
<blockquote>
<p>Can you suggest a modification?</p>
</blockquote>
<p>I am looking into it</p>



<a name="10820"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10820" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10820">(Jun 09 2020 at 13:49)</a>:</h4>
<p>i am inspecting the environment to see what packages may be restricting <code>pyproj</code> and  <code>proj</code> to be updated</p>



<a name="10821"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10821" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10821">(Jun 09 2020 at 13:50)</a>:</h4>
<p>many thanks!</p>



<a name="10822"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10822" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10822">(Jun 09 2020 at 13:51)</a>:</h4>
<p>Anytime!</p>



<a name="10823"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10823" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10823">(Jun 09 2020 at 13:51)</a>:</h4>
<p>Are you using this environment file: <a href="https://github.com/matt-long/krill-cesm-le/blob/master/environment/environment.yml" target="_blank" title="https://github.com/matt-long/krill-cesm-le/blob/master/environment/environment.yml">https://github.com/matt-long/krill-cesm-le/blob/master/environment/environment.yml</a>?</p>



<a name="10824"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10824" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10824">(Jun 09 2020 at 13:52)</a>:</h4>
<p>yes</p>



<a name="10825"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10825" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10825">(Jun 09 2020 at 14:02)</a>:</h4>
<p>I happened to have a <code>krill</code> environment. I tried updating it with  <code>conda env update -f environment/environment.yml</code> and I noticed that <code>proj</code> and <code>pyproj</code> versions didn't change i.e. before and after the update:</p>
<div class="codehilite"><pre><span></span>$ conda list proj
<span class="c1"># packages in environment at /glade/work/abanihi/softwares/miniconda3/envs/krill:</span>
<span class="c1">#</span>
<span class="c1"># Name                    Version                   Build  Channel</span>
proj                      <span class="m">7</span>.0.0                h966b41f_3    conda-forge
pyproj                    <span class="m">2</span>.6.0            py37h34dd122_1    conda-forge
</pre></div>


<p>I'd recommend updating the environment file with the following:</p>
<div class="codehilite"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">cartopy &gt;= 0.18.0</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">proj &gt;= 7.0.0</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pyproj &gt;= 2.6.0</span>
</pre></div>



<a name="10826"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10826" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10826">(Jun 09 2020 at 14:05)</a>:</h4>
<p>thanks, I'll try it</p>



<a name="10831"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10831" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10831">(Jun 09 2020 at 14:58)</a>:</h4>
<p>this seems to have fixed my import error</p>



<a name="10832"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10832" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10832">(Jun 09 2020 at 14:58)</a>:</h4>
<p>thanks!</p>



<a name="10833"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/10833" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#10833">(Jun 09 2020 at 15:00)</a>:</h4>
<p>Awesome <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="94641"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/94641" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mira Berdahl <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#94641">(Jan 18 2024 at 23:13)</a>:</h4>
<p><span class="user-mention" data-user-id="14">@Matt Long</span> , looks like this happened a while ago for you, but do you recall how you resolved it? This exact thing just happened to me. </p>
<p><span class="user-mention silent" data-user-id="14">Matt Long</span> <a href="#narrow/stream/10-python-questions/topic/cartopy.20import.20error/near/10814">said</a>:</p>
<blockquote>
<p>I recently updated my environment and get the following error on importing <code>cartopy</code>:</p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="o">---------------------------------------------------------------------------</span>
<span class="ne">ImportError</span>                               <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">b0688681af7f</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
     <span class="mi">12</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
     <span class="mi">13</span>
<span class="o">---&gt;</span> <span class="mi">14</span> <span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
     <span class="mi">15</span> <span class="kn">from</span> <span class="nn">cartopy.util</span> <span class="kn">import</span> <span class="n">add_cyclic_point</span>
     <span class="mi">16</span> <span class="kn">import</span> <span class="nn">cmocean</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">mclong</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">krill</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">cartopy</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
     <span class="mi">94</span> <span class="c1"># Commonly used sub-modules. Imported here to provide end-user</span>
     <span class="mi">95</span> <span class="c1"># convenience.</span>
<span class="o">---&gt;</span> <span class="mi">96</span> <span class="kn">import</span> <span class="nn">cartopy.crs</span>
     <span class="mi">97</span> <span class="kn">import</span> <span class="nn">cartopy.feature</span>  <span class="c1"># noqa: F401  (flake8 = unused import)</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">mclong</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">krill</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">cartopy</span><span class="o">/</span><span class="n">crs</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
     <span class="mi">34</span> <span class="kn">import</span> <span class="nn">six</span>
     <span class="mi">35</span>
<span class="o">---&gt;</span> <span class="mi">36</span> <span class="kn">from</span> <span class="nn">cartopy._crs</span> <span class="kn">import</span> <span class="p">(</span><span class="n">CRS</span><span class="p">,</span> <span class="n">Geodetic</span><span class="p">,</span> <span class="n">Globe</span><span class="p">,</span> <span class="n">PROJ4_VERSION</span><span class="p">,</span>
     <span class="mi">37</span>                           <span class="n">WGS84_SEMIMAJOR_AXIS</span><span class="p">,</span> <span class="n">WGS84_SEMIMINOR_AXIS</span><span class="p">)</span>
     <span class="mi">38</span> <span class="kn">from</span> <span class="nn">cartopy._crs</span> <span class="kn">import</span> <span class="n">Geocentric</span>  <span class="c1"># noqa: F401 (flake8 = unused import)</span>

<span class="ne">ImportError</span><span class="p">:</span> <span class="n">libproj</span><span class="o">.</span><span class="n">so</span><span class="mf">.19</span><span class="p">:</span> <span class="n">cannot</span> <span class="nb">open</span> <span class="n">shared</span> <span class="nb">object</span> <span class="n">file</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">file</span> <span class="ow">or</span> <span class="n">directory</span>
</code></pre></div>
<p>Has anyone encountered this? Solutions?</p>
</blockquote>



<a name="94720"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/10-python-questions/topic/cartopy%20import%20error/near/94720" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Camron <a href="http://127.0.0.1:4000/html/stream/10-python-questions/topic/cartopy.20import.20error.html#94720">(Jan 19 2024 at 20:41)</a>:</h4>
<p>Something like this is usually an environment conflict or other mismatch of dependencies. Are you using conda? Can you activate the environment and share the output of <code>conda list</code>? <em>Sometimes</em> a <code>conda update --all</code> might get you there, depending on how complex your environment is.</p>



<hr><p>Last updated: Dec 17 2024 at 18:57 UTC</p>
</html>