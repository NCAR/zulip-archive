<html>
<head><meta charset="utf-8"><title>cookiecutter-template · hack-projects · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://127.0.0.1:4000/html/stream/21-hack-projects/index.html">hack-projects</a></h2>
<h3>Topic: <a href="http://127.0.0.1:4000/html/stream/21-hack-projects/topic/cookiecutter-template.html">cookiecutter-template</a></h3>

<hr>

<base href="https://zulip2.cloud.ucar.edu">

<head><link href="http://127.0.0.1:4000/style.css" rel="stylesheet"></head>

<a name="9980"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/cookiecutter-template/near/9980" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/21-hack-projects/topic/cookiecutter-template.html#9980">(May 28 2020 at 22:03)</a>:</h4>
<p><span aria-label="megaphone" class="emoji emoji-1f4e3" role="img" title="megaphone">:megaphone:</span></p>
<p>Hi <span class="user-mention" data-user-id="*">@all</span> ,</p>
<p>For anyone who is interested in creating a Python project, but wants to avoid the boilerplate of a Python project ;  I put together a minimal, cookiecutter template (with a well-defined, standard project structure). </p>
<p>The cookiecutter template resides <a href="https://github.com/NCAR/pypackage-template" target="_blank" title="https://github.com/NCAR/pypackage-template">here</a>. <br>
See <a href="https://github.com/NCAR/pypackage-template" target="_blank" title="https://github.com/NCAR/pypackage-template">https://github.com/NCAR/pypackage-template</a> for more details. </p>
<h2>Quick Start</h2>
<ul>
<li>To use the cookiecutter template, you will need to install the <code>cookiecutter</code> library via conda or pip </li>
</ul>
<div class="codehilite"><pre><span></span>conda install  -c conda-forge cookiecutter
</pre></div>


<p>Or </p>
<div class="codehilite"><pre><span></span>python -m pip install cookiecutter
</pre></div>


<ul>
<li>Generate a Python package project by running the following</li>
</ul>
<div class="codehilite"><pre><span></span>cookiecutter https://github.com/NCAR/cookiecutter-pypackage.git
</pre></div>


<h2>Example</h2>
<ul>
<li>Generate a Python project for Homer's Time Traveling Toaster</li>
</ul>
<div class="codehilite"><pre><span></span>❯ cookiecutter https://github.com/NCAR/pypackage-template                            <span class="o">(</span>base<span class="o">)</span> <span class="m">15</span>:49:38
maintainer_full_name <span class="o">[</span>Foo Bar<span class="o">]</span>: Homer Simpson
maintainer_email <span class="o">[</span>foo@ucar.edu<span class="o">]</span>: homer@springfield.io
github_username_or_organization <span class="o">[</span>NCAR<span class="o">]</span>: SNPP
project_name <span class="o">[</span>Python Boilerplate<span class="o">]</span>: Time Traveling Toaster
project_slug <span class="o">[</span>time_traveling_toaster<span class="o">]</span>:
project_short_description <span class="o">[</span>Python Boilerplate contains all the boilerplate you need to create a Python package.<span class="o">]</span>: A Toaster to transport you to prehistoric times: be careful not to change anything <span class="k">if</span> you travel back in <span class="nb">time</span>
Select open_source_license:
<span class="m">1</span> - MIT license
<span class="m">2</span> - BSD license
<span class="m">3</span> - ISC license
<span class="m">4</span> - Apache Software License <span class="m">2</span>.0
<span class="m">5</span> - GNU General Public License v3
Choose from <span class="m">1</span>, <span class="m">2</span>, <span class="m">3</span>, <span class="m">4</span>, <span class="m">5</span> <span class="o">[</span><span class="m">1</span><span class="o">]</span>: <span class="m">2</span>

~/devel/personal via C base via  <span class="m">96</span>%/36% took 45s
❯ <span class="nb">cd</span> time_traveling_toaster/                                                         <span class="o">(</span>base<span class="o">)</span> <span class="m">15</span>:50:28

devel/personal/time_traveling_toaster via 🐍 v3.7.6 via C base via  <span class="m">96</span>%/36%
❯ tree -L <span class="m">3</span>                                                                          <span class="o">(</span>base<span class="o">)</span> <span class="m">15</span>:50:41
.
├── LICENSE
├── MANIFEST.in
├── README.rst
├── ci
│   └── environment.yml
├── codecov.yml
├── pre-commit-config.yaml
├── requirements.txt
├── setup.cfg
├── setup.py
├── tests
│   ├── __init__.py
│   └── test_sample.py
└── time_traveling_toaster
    └── __init__.py

<span class="m">3</span> directories, <span class="m">12</span> files
</pre></div>


<div class="codehilite"><pre><span></span>devel/personal/time_traveling_toaster via 🐍 v3.7.6 via C base via  <span class="m">95</span>%/36%
❯ cat setup.py
setup<span class="o">(</span>
    <span class="nv">maintainer</span><span class="o">=</span><span class="s2">&quot;Homer Simpson&quot;</span>,
    <span class="nv">maintainer_email</span><span class="o">=</span><span class="s1">&#39;homer@springfield.io&#39;</span>,
    <span class="nv">python_requires</span><span class="o">=</span><span class="s1">&#39;&gt;=3.6&#39;</span>,
    <span class="nv">classifiers</span><span class="o">=[</span>
        <span class="s1">&#39;Development Status :: 2 - Pre-Alpha&#39;</span>,
        <span class="s1">&#39;Intended Audience :: Developers&#39;</span>,
        <span class="s1">&#39;License :: OSI Approved :: BSD License&#39;</span>,
        <span class="s1">&#39;Natural Language :: English&#39;</span>,
        <span class="s1">&#39;Programming Language :: Python :: 3&#39;</span>,
        <span class="s1">&#39;Programming Language :: Python :: 3.6&#39;</span>,
        <span class="s1">&#39;Programming Language :: Python :: 3.7&#39;</span>,
        <span class="s1">&#39;Programming Language :: Python :: 3.8&#39;</span>,
        <span class="s1">&#39;Topic :: Scientific/Engineering&#39;</span>,
        <span class="s1">&#39;Operating System :: OS Independent&#39;</span>,
        <span class="s1">&#39;Intended Audience :: Science/Research&#39;</span>,
    <span class="o">]</span>,
    <span class="nv">description</span><span class="o">=</span><span class="s1">&#39;A Toaster to transport you to prehistoric times: be careful not to change anything if you travel back in time&#39;</span>,
    <span class="nv">install_requires</span><span class="o">=</span>requirements,
    <span class="nv">license</span><span class="o">=</span><span class="s1">&#39;BSD license&#39;</span>,
...
</pre></div>



<a name="10722"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/cookiecutter-template/near/10722" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Lindsay <a href="http://127.0.0.1:4000/html/stream/21-hack-projects/topic/cookiecutter-template.html#10722">(Jun 05 2020 at 21:24)</a>:</h4>
<p><span class="user-mention" data-user-id="13">@Anderson Banihirwe</span> , in the pypackage-template repo, it looks like you've put arguments for <code>black</code> into the file <code>.pre-commit-config.yaml</code>, while the arguments for <code>flake8</code> are in the file <code>setup.cfg</code>. What's the rationale for putting these tool's arguments in different files?</p>



<a name="10726"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/cookiecutter-template/near/10726" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Levy <a href="http://127.0.0.1:4000/html/stream/21-hack-projects/topic/cookiecutter-template.html#10726">(Jun 05 2020 at 22:00)</a>:</h4>
<p><span class="user-mention" data-user-id="13">@Anderson Banihirwe</span> a couple of comments about the <code>pre-commit</code> setup:</p>
<ol>
<li>In python 3.8, the pre-commit checks failed with</li>
</ol>
<div class="codehilite"><pre><span></span>An unexpected error has occurred: CalledProcessError: command: (&#39;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/bin/python&#39;, &#39;-mpip&#39;, &#39;install&#39;, &#39;.&#39;)
return code: 1
expected return code: 0
stdout: (none)
stderr:
    Traceback (most recent call last):
      File &quot;/glade/work/mlevy/miniconda3/envs/python_checks/lib/python3.8/runpy.py&quot;, line 194, in _run_module_as_main
        return _run_code(code, main_globals, None,
      File &quot;/glade/work/mlevy/miniconda3/envs/python_checks/lib/python3.8/runpy.py&quot;, line 87, in _run_code
        exec(code, run_globals)
      File &quot;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/__main__.py&quot;, line 23, in &lt;module&gt;
        from pip._internal.cli.main import main as _main  # isort:skip # noqa
      File &quot;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/_internal/cli/main.py&quot;, line 10, in &lt;module&gt;
        from pip._internal.cli.autocompletion import autocomplete
      File &quot;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/_internal/cli/autocompletion.py&quot;, line 9, in &lt;module&gt;
        from pip._internal.cli.main_parser import create_main_parser
      File &quot;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/_internal/cli/main_parser.py&quot;, line 7, in &lt;module&gt;
        from pip._internal.cli import cmdoptions
      File &quot;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/_internal/cli/cmdoptions.py&quot;, line 24, in &lt;module&gt;
        from pip._internal.cli.progress_bars import BAR_TYPES
      File &quot;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/_internal/cli/progress_bars.py&quot;, line 12, in &lt;module&gt;
        from pip._internal.utils.logging import get_indentation
      File &quot;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/_internal/utils/logging.py&quot;, line 18, in &lt;module&gt;
        from pip._internal.utils.misc import ensure_dir
      File &quot;/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/_internal/utils/misc.py&quot;, line 20, in &lt;module&gt;
        from pip._vendor import pkg_resources
    ImportError: cannot import name &#39;pkg_resources&#39; from &#39;pip._vendor&#39; (/glade/u/home/mlevy/.cache/pre-commit/repopeptvfuh/py_env-python3.8/lib/python3.8/site-packages/pip/_vendor/__init__.py)
</pre></div>


<p>but everything seemed to work after downgrading to 3.7</p>
<ol start="2">
<li>There are checks in the <code>pre-commit</code> setup that are not in the continuous integration, which seems like an odd choice. Code that passed all the CI tests failed in pre-commit:</li>
</ol>
<div class="codehilite"><pre><span></span>$ git commit
Trim Trailing Whitespace.................................................Passed
Fix End of Files.........................................................Passed
Check docstring is first.................................................Passed
Check Yaml...........................................(no files to check)Skipped
Fix double quoted strings................................................Failed
- hook id: double-quote-string-fixer
- exit code: 1
- files were modified by this hook

Fixing strings in cesmcatalog/gen_CESM_catalog.py

black....................................................................Passed
flake8...................................................................Passed
seed isort known_third_party.............................................Failed
- hook id: seed-isort-config
- exit code: 1
- files were modified by this hook
isort....................................................................Passed
</pre></div>


<p>Is there a reason why those first five checks are in pre-commit but not in the continuous integration? It seems like you should be able to include the formatting checks via <code>black</code> or <code>flake8</code>. Also, why is <code>isort</code> flagging an error here but not on github?</p>



<a name="10765"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/cookiecutter-template/near/10765" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/21-hack-projects/topic/cookiecutter-template.html#10765">(Jun 07 2020 at 11:11)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="13">Anderson Banihirwe</span> , in the pypackage-template repo, it looks like you've put arguments for <code>black</code> into the file <code>.pre-commit-config.yaml</code>, while the arguments for <code>flake8</code> are in the file <code>setup.cfg</code>. What's the rationale for putting these tool's arguments in different files?</p>
</blockquote>
<p>Black doesn't (<strong>has refused to</strong>) support the <code>setup.cfg</code> config file. If interested, see this <a href="https://github.com/psf/black/issues/6880" target="_blank" title="https://github.com/psf/black/issues/6880">issue</a> for more details.  Black supports <code>pyproject.toml</code> configuration file though. However, I didn't want to have an additional configuration file for just <code>black</code>.  Also,   a while ago I ran into some issues when I tried using <code>pyproject.toml</code> and <code>setup.cfg</code> together.</p>
<p>Note: If you've never heard of <code>pyproject.toml</code> and want to go down a rabbit hole <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span>,  here are two great blog posts on it: </p>
<ul>
<li><a href="https://snarky.ca/what-the-heck-is-pyproject-toml/" target="_blank" title="https://snarky.ca/what-the-heck-is-pyproject-toml/">What the heck is pyproject.toml? </a></li>
<li><a href="https://blog.pilosus.org/posts/2019/12/26/python-third-party-tools-configuration/" target="_blank" title="https://blog.pilosus.org/posts/2019/12/26/python-third-party-tools-configuration/">Python third-party tools configuration: pyproject.toml vs setup.cfg </a></li>
</ul>



<a name="10766"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/cookiecutter-template/near/10766" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/21-hack-projects/topic/cookiecutter-template.html#10766">(Jun 07 2020 at 11:20)</a>:</h4>
<blockquote>
<p>@Anderson Banihirwe a couple of comments about the pre-commit setup:<br>
In python 3.8, the pre-commit checks failed with</p>
</blockquote>
<p>This issue appears to be the same issue described by <span class="user-mention" data-user-id="40">@Riley Brady</span>  <a href="#narrow/stream/17-python-dev/topic/pre-commit.20errors/near/9921" title="#narrow/stream/17-python-dev/topic/pre-commit.20errors/near/9921">here</a></p>
<blockquote>
<p>but everything seemed to work after downgrading to 3.7</p>
</blockquote>
<p>Riley was able to get it to work without needing to downgrade to Python 3.7 as he described in his reply:</p>
<blockquote>
<blockquote>
<p>Hm I changed out the repo for pre-commit on cheyenne and it didn't work. Switched to an interactive node on casper and it worked. Not really sure what's going on here.</p>
</blockquote>
</blockquote>
<p>It would be nice to know what's going on exactly</p>



<a name="10767"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/cookiecutter-template/near/10767" class="zl"><img src="http://127.0.0.1:4000/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/21-hack-projects/topic/cookiecutter-template.html#10767">(Jun 07 2020 at 11:29)</a>:</h4>
<blockquote>
<p>Is there a reason why those first five checks are in pre-commit but not in the continuous integration? It seems like you should be able to include the formatting checks</p>
</blockquote>
<p>There's nothing stopping us from having them in the continuous integration.  The short answer is that it wasn't straightforward to add them to the continuous integration, and I was lazy <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>
<p>When I get a chance, I will look into it and will update the cookiecutter template...</p>



<hr><p>Last updated: Jan 27 2025 at 22:16 UTC</p>
</html>