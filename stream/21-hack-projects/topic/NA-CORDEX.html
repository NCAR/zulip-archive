<html>
<head><meta charset="utf-8"><title>NA-CORDEX · hack-projects · Zulip Chat Archive</title></head>
<h2>Stream: <a href="../../..//stream/21-hack-projects/index.html">hack-projects</a></h2>
<h3>Topic: <a href="../../..//stream/21-hack-projects/topic/NA-CORDEX.html">NA-CORDEX</a></h3>

<hr>


<head><link href="../../../style.css" rel="stylesheet"></head>

<a name="3061"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/NA-CORDEX/near/3061" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Seth McGinnis <a href="../../..//stream/21-hack-projects/topic/NA-CORDEX.html#3061">(Mar 13 2020 at 18:44)</a>:</h4>
<p>I'm working on an esm-intake catalog for the NA-CORDEX dataset.  We'll use that to convert the dataset to zarr format, then upload it to AWS as a contribution to the Amazon Sustainability Data Initiative.  </p>
<p>I also want to develop some pangeo jupyter notebooks for working with the data.  I'm currently thinking we'll do some of the standard visualizations that we use for QA and general evaluation, but I'm open to ideas and suggestions.</p>



<a name="3181"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/NA-CORDEX/near/3181" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Seth McGinnis <a href="../../..//stream/21-hack-projects/topic/NA-CORDEX.html#3181">(Mar 13 2020 at 21:40)</a>:</h4>
<p>I cloned the intake-esm-datastore repo on github and have added a first version of the catalog and JSON for the NA-CORDEX dataset:  <a href="https://github.com/sethmcg/intake-esm-datastore" target="_blank" title="https://github.com/sethmcg/intake-esm-datastore">https://github.com/sethmcg/intake-esm-datastore</a></p>
<p>I think it should be functional, but I'm not sure where to go from here.  How do I check and test it?  <span class="user-mention" data-user-id="13">@Anderson Banihirwe</span> ?</p>



<a name="3193"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/NA-CORDEX/near/3193" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="../../..//stream/21-hack-projects/topic/NA-CORDEX.html#3193">(Mar 13 2020 at 22:09)</a>:</h4>
<p>There seems to be some formatting errors in the json:</p>
<div class="codehilite"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">intake</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;intake-esm-datastore/catalogs/glade-na-cordex.json&quot;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="n">JSONDecodeError</span>                           <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="n">a5564d66b493</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">abanihi</span><span class="o">/</span><span class="n">softwares</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">intake_esm</span><span class="o">/</span><span class="n">core</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">esmcol_path</span><span class="p">,</span> <span class="n">progressbar</span><span class="p">,</span> <span class="n">log_level</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
     <span class="mi">75</span>         <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">numeric_log_level</span><span class="p">)</span>
     <span class="mi">76</span>         <span class="bp">self</span><span class="o">.</span><span class="n">progressbar</span> <span class="o">=</span> <span class="n">progressbar</span>
<span class="o">---&gt;</span> <span class="mi">77</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_col_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">esmcol_path</span> <span class="o">=</span> <span class="n">_fetch_and_parse_json</span><span class="p">(</span><span class="n">esmcol_path</span><span class="p">)</span>
     <span class="mi">78</span>         <span class="bp">self</span><span class="o">.</span><span class="n">df</span> <span class="o">=</span> <span class="n">_fetch_catalog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_col_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">esmcol_path</span><span class="p">)</span>
     <span class="mi">79</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span> <span class="o">=</span> <span class="p">{}</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">abanihi</span><span class="o">/</span><span class="n">softwares</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">intake_esm</span><span class="o">/</span><span class="n">utils</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">_fetch_and_parse_json</span><span class="p">(</span><span class="n">input_path</span><span class="p">)</span>
     <span class="mi">62</span>
     <span class="mi">63</span>     <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="o">---&gt;</span> <span class="mi">64</span>         <span class="k">raise</span> <span class="n">e</span>
     <span class="mi">65</span>
     <span class="mi">66</span>     <span class="k">return</span> <span class="n">data</span><span class="p">,</span> <span class="n">input_path</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">abanihi</span><span class="o">/</span><span class="n">softwares</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">intake_esm</span><span class="o">/</span><span class="n">utils</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">_fetch_and_parse_json</span><span class="p">(</span><span class="n">input_path</span><span class="p">)</span>
     <span class="mi">59</span>             <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
     <span class="mi">60</span>                 <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Loading ESMCol from filesystem: {input_path}&#39;</span><span class="p">)</span>
<span class="o">---&gt;</span> <span class="mi">61</span>                 <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
     <span class="mi">62</span>
     <span class="mi">63</span>     <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">abanihi</span><span class="o">/</span><span class="n">softwares</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">json</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">load</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">object_hook</span><span class="p">,</span> <span class="n">parse_float</span><span class="p">,</span> <span class="n">parse_int</span><span class="p">,</span> <span class="n">parse_constant</span><span class="p">,</span> <span class="n">object_pairs_hook</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
    <span class="mi">294</span>         <span class="bp">cls</span><span class="o">=</span><span class="bp">cls</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="n">object_hook</span><span class="p">,</span>
    <span class="mi">295</span>         <span class="n">parse_float</span><span class="o">=</span><span class="n">parse_float</span><span class="p">,</span> <span class="n">parse_int</span><span class="o">=</span><span class="n">parse_int</span><span class="p">,</span>
<span class="o">--&gt;</span> <span class="mi">296</span>         <span class="n">parse_constant</span><span class="o">=</span><span class="n">parse_constant</span><span class="p">,</span> <span class="n">object_pairs_hook</span><span class="o">=</span><span class="n">object_pairs_hook</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
    <span class="mi">297</span>
    <span class="mi">298</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">abanihi</span><span class="o">/</span><span class="n">softwares</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">json</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">object_hook</span><span class="p">,</span> <span class="n">parse_float</span><span class="p">,</span> <span class="n">parse_int</span><span class="p">,</span> <span class="n">parse_constant</span><span class="p">,</span> <span class="n">object_pairs_hook</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
    <span class="mi">346</span>             <span class="n">parse_int</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">parse_float</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span>
    <span class="mi">347</span>             <span class="n">parse_constant</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">object_pairs_hook</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kw</span><span class="p">):</span>
<span class="o">--&gt;</span> <span class="mi">348</span>         <span class="k">return</span> <span class="n">_default_decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="mi">349</span>     <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
    <span class="mi">350</span>         <span class="bp">cls</span> <span class="o">=</span> <span class="n">JSONDecoder</span>

<span class="o">/</span><span class="n">glade</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">abanihi</span><span class="o">/</span><span class="n">softwares</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">analysis</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">json</span><span class="o">/</span><span class="n">decoder</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">_w</span><span class="p">)</span>
    <span class="mi">335</span>
    <span class="mi">336</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">--&gt; 337         obj, end = self.raw_decode(s, idx=_w(s, 0).end())</span>
<span class="s2">    338         end = _w(s, end).end()</span>
<span class="s2">    339         if end != len(s):</span>

<span class="s2">/glade/work/abanihi/softwares/miniconda3/envs/analysis/lib/python3.7/json/decoder.py in raw_decode(self, s, idx)</span>
<span class="s2">    351         &quot;&quot;&quot;</span>
    <span class="mi">352</span>         <span class="k">try</span><span class="p">:</span>
<span class="o">--&gt;</span> <span class="mi">353</span>             <span class="n">obj</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_once</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
    <span class="mi">354</span>         <span class="k">except</span> <span class="ne">StopIteration</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="mi">355</span>             <span class="k">raise</span> <span class="n">JSONDecodeError</span><span class="p">(</span><span class="s2">&quot;Expecting value&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">err</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="kn">from</span> <span class="bp">None</span>

<span class="n">JSONDecodeError</span><span class="p">:</span> <span class="n">Expecting</span> <span class="s1">&#39;:&#39;</span> <span class="n">delimiter</span><span class="p">:</span> <span class="n">line</span> <span class="mi">32</span> <span class="n">column</span> <span class="mi">17</span> <span class="p">(</span><span class="n">char</span> <span class="mi">1020</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span>
</pre></div>



<a name="3195"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/NA-CORDEX/near/3195" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="../../..//stream/21-hack-projects/topic/NA-CORDEX.html#3195">(Mar 13 2020 at 22:11)</a>:</h4>
<p>To validate the json against the schema, we have a tool (esmcol-validator), you can install it via conda or pip</p>



<a name="3197"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/NA-CORDEX/near/3197" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="../../..//stream/21-hack-projects/topic/NA-CORDEX.html#3197">(Mar 13 2020 at 22:11)</a>:</h4>
<p>Instructions  on how to install it are available here: <a href="https://github.com/NCAR/esmcol-validator" target="_blank" title="https://github.com/NCAR/esmcol-validator">https://github.com/NCAR/esmcol-validator</a></p>



<a name="3198"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/NA-CORDEX/near/3198" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="../../..//stream/21-hack-projects/topic/NA-CORDEX.html#3198">(Mar 13 2020 at 22:12)</a>:</h4>
<p>Once it is installed, you can run</p>
<div class="codehilite"><pre><span></span>$ esmcol-validator glade-na-cordex.json
</pre></div>



<a name="3271"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/21-hack-projects/topic/NA-CORDEX/near/3271" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Seth McGinnis <a href="../../..//stream/21-hack-projects/topic/NA-CORDEX.html#3271">(Mar 13 2020 at 23:38)</a>:</h4>
<p>Thanks!  Looks like it's time for me to learn how to manage pull requests, so I will return to this later.</p>



<hr><p>Last updated: May 16 2025 at 17:14 UTC</p>
</html>