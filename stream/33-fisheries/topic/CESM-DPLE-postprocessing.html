<html>
<head><meta charset="utf-8"><title>CESM-DPLE-postprocessing · fisheries · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://127.0.0.1:4000/html/stream/33-fisheries/index.html">fisheries</a></h2>
<h3>Topic: <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html">CESM-DPLE-postprocessing</a></h3>

<hr>


<head><link href="http://127.0.0.1:4000/style.css" rel="stylesheet"></head>

<a name="60653"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/60653" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hyunggyu Lim <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#60653">(Aug 01 2022 at 20:49)</a>:</h4>
<p>Quick update for <span class="user-mention" data-user-id="122">@Colleen Petrik</span>  <br>
Postprocessing files of CESM-DPLE are in /glade/work/kristenk/fish-offline for diatC, POC_FLUX_IN_bottom, spC_150m, TEMP_150m, zooC_150m, zoo_loss_150m.  There is no Temp_bottom. There are all original output, not drift corrected.</p>
<p>So,<br>
<span class="user-mention" data-user-id="28">@Kristen Krumhardt</span> is running Temp_bottom and POC_bottom preparation and will run drift correction.<br>
<span class="user-mention" data-user-id="274">@Hyunggyu Lim</span> is running upper_field preparation and will run drift correction code.</p>



<a name="60656"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/60656" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Levy <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#60656">(Aug 01 2022 at 20:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="274">Hyunggyu Lim</span> <a href="#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/60653">said</a>:</p>
<blockquote>
<p>There is no Temp_bottom. </p>
</blockquote>
<p>This won't help existing runs, but I have a POP sandbox that adds a <code>TEMP_BOTTOM</code> diagnostic field so future POP runs will provide this field</p>



<a name="60699"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/60699" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colleen Petrik <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#60699">(Aug 02 2022 at 00:29)</a>:</h4>
<p><span class="user-mention" data-user-id="28">@Kristen Krumhardt</span> , in addition to temp_bottom, FEISTY needs all the individual phyto carbon biomasses (diazC and coccoC if they exist). <br>
<span class="user-mention" data-user-id="274">@Hyunggyu Lim</span> , Kristen already has a notebook to drift-correct these, which she did a few months back. Why not have Kristen repeat this instead of you doing a new drift correction? Thanks!</p>



<a name="60700"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/60700" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristen Krumhardt <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#60700">(Aug 02 2022 at 00:55)</a>:</h4>
<p><span class="user-mention" data-user-id="122">@Colleen Petrik</span> I have the notebooks but all the output they produced got scrubbed off scratch so we have to re-run everything. First we have to run preprocessing notebooks to make the FEISTY input variables from each forecast (64 initialization years x 40 ensemble members). <span class="user-mention" data-user-id="274">@Hyunggyu Lim</span> is running the upper fields notebooks which should be pretty fast to run  - these include the plankton biomass (spC, diatC, diazC - no coccoC in this version) as well as zooC, temp 150m mean, zoo loss integral. I am running the bottom fields (TEMP bottom and POC_FLUX_IN bottom) which are much slower to run. I did TEMP_bottom last week and I'm running POC_FLUX_IN this week (they each take several days to complete).. and then we will drift correct all the files. We can move these somewhere other than scratch this time so they don't get deleted after a couple months.</p>



<a name="60719"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/60719" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hyunggyu Lim <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#60719">(Aug 02 2022 at 14:41)</a>:</h4>
<p><span class="user-mention" data-user-id="122">@Colleen Petrik</span>  Yes. <span class="user-mention" data-user-id="28">@Kristen Krumhardt</span>  want to save her memory in the server due to her other tasks. Problem is that python code of Kristen is not working well from my account due to environmental setting for my python and pbs job submission. I tried environ setting during last week (took 3 days) and submit pbs job in last weekend but it didn't work well.  Yesterday, we met a zoom session to fix it and we run one of her code in my environment. but it didn't work at this point. So we now change environ setting for python once again (it would take 3 days more?). During this period, I hope Kristen will run all codes to generate FEISTY forcing output for you. Hope we have to save these files in safe place. Thank you all!</p>



<a name="60755"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/60755" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colleen Petrik <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#60755">(Aug 02 2022 at 16:42)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="28">@Kristen Krumhardt</span> and <span class="user-mention" data-user-id="274">@Hyunggyu Lim</span> . Let me know if you need some of my work or home drive space for storage.</p>



<a name="61106"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61106" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hyunggyu Lim <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61106">(Aug 08 2022 at 02:34)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="122">@Colleen Petrik</span> , <span class="user-mention" data-user-id="28">@Kristen Krumhardt</span>  provided FEISTY forcing files in /glade/scratch/kristenk/fish-offline (around 1.2TB). I copied them my scratch and Kristen also had backup in /glade/campaign/cesm/development/bgcwg/projects/DPLE-FEISTY (we can see in casper but not accessible yet) for longterm saving , too. Kristen will ask to open this folder to see them for us. Thank you so much Kristen!!!</p>



<a name="61181"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61181" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hyunggyu Lim <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61181">(Aug 08 2022 at 20:50)</a>:</h4>
<p>We can see now in /glade/campaign/cesm/development/bgcwg/projects/DPLE-FEISTY</p>



<a name="61309"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61309" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colleen Petrik <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61309">(Aug 10 2022 at 17:26)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="274">@Hyunggyu Lim</span> and <span class="user-mention" data-user-id="28">@Kristen Krumhardt</span>! Let me know when they are drift corrected and ready as inputs to FEISTY.</p>



<a name="61313"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61313" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristen Krumhardt <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61313">(Aug 10 2022 at 17:33)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="122">@Colleen Petrik</span> ! These are drift-corrected anomalies... so I guess you will have to add back in a climatology before running FEISTY? Also, the units are not specified in the netcdf files, so I will work on getting those to you (or I will generate new netcdfs that have the proper metadata)</p>



<a name="61317"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61317" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colleen Petrik <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61317">(Aug 10 2022 at 17:36)</a>:</h4>
<p><span class="user-mention" data-user-id="28">@Kristen Krumhardt</span>  That's great, I already have the addition to the FOSI added in my workflow. Should I be adding the anomalies to A) the FOSI from that 10-yr period, B) the climatology of that 10-yr period, or C) the climatology over the whole FOSI (68-yrs)? Thanks!</p>



<a name="61324"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61324" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristen Krumhardt <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61324">(Aug 10 2022 at 17:43)</a>:</h4>
<p>I don't really know what would be best.. I think adding in the climatology over the whole FOSI would be a good start and then we can refine our method to specific decades, if necessary.</p>



<a name="61343"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61343" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colleen Petrik <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61343">(Aug 10 2022 at 18:21)</a>:</h4>
<p><span class="user-mention" data-user-id="28">@Kristen Krumhardt</span> and <span class="user-mention" data-user-id="14">@Matt Long</span> : To re-create the absolute values of plankton biomass and temperature from the anomalies, I would need to add whatever was subtracted from them in the first place to make the anomalies. What was subtracted?</p>



<a name="61344"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61344" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristen Krumhardt <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61344">(Aug 10 2022 at 18:36)</a>:</h4>
<p><span class="user-mention" data-user-id="122">@Colleen Petrik</span>  to make the anomalies I subtracted the climatological drift over the 1964 to 2014 period. See cell 14 in this <a href="https://github.com/kristenkrumhardt/fish-offline/blob/kristens_branch/notebooks/DPLE_FEISTY_bottom_fields.ipynb">https://github.com/kristenkrumhardt/fish-offline/blob/kristens_branch/notebooks/DPLE_FEISTY_bottom_fields.ipynb</a></p>
<p>This notebook above is for the bottom fields, but the upper fields have the same method: <br>
<a href="https://github.com/kristenkrumhardt/fish-offline/blob/kristens_branch/notebooks/DPLE_FEISTY_upper_fields.ipynb">https://github.com/kristenkrumhardt/fish-offline/blob/kristens_branch/notebooks/DPLE_FEISTY_upper_fields.ipynb</a></p>



<a name="61365"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61365" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristen Krumhardt <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61365">(Aug 10 2022 at 19:52)</a>:</h4>
<p><span class="user-mention" data-user-id="122">@Colleen Petrik</span>  I'm re-running my notebooks so that the netcdfs contain the proper metadata (units, etc.) and will let you know when they're all ready (probably tomorrow)</p>



<a name="61452"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61452" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristen Krumhardt <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61452">(Aug 11 2022 at 19:46)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="122">@Colleen Petrik</span> , the DPLE FEISTY forcing files have the units  in the netcdfs now :) Also, just to be clear about the dimensions:<br>
M = member (40 ensemble members)<br>
L = lead month (122 lead months long, Nov and Dec of initialization year + 10 year forecast)<br>
Y = initialization year (64 initialization years, 1954 to 2017)</p>



<a name="61456"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61456" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colleen Petrik <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61456">(Aug 11 2022 at 20:44)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="28">@Kristen Krumhardt</span> !</p>



<a name="61557"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61557" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61557">(Aug 15 2022 at 16:02)</a>:</h4>
<p><span class="user-mention" data-user-id="122">@Colleen Petrik</span>, Sorry for the delayed response; I've been on vacation. </p>
<p>I think we need a bit more context here, but I am imagining that you are talking about the DPLE forecast integrations. In this case, the subtracted field is a lead-year dependent climatology. Adding this back in, however, would re-introduce drift relative to the hindcast. So perhaps the right thing to add back is the climatology from the hindcast.  </p>
<p>cc <span class="user-mention" data-user-id="28">@Kristen Krumhardt</span></p>



<a name="61562"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61562" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61562">(Aug 15 2022 at 16:06)</a>:</h4>
<p>sorry...for some reason Zulip didn't show me the rest of the thread where it looks like you have this sorted.</p>



<a name="61622"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61622" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colleen Petrik <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61622">(Aug 15 2022 at 19:23)</a>:</h4>
<p><span class="user-mention" data-user-id="14">@Matt Long</span> , as we discussed before, the drift-corrected anomalies need to be transformed into raw values (non-anomalies) of temperature, biomass, etc. The options I proposed were: add to the anomalies A) the FOSI from that 10-yr period, B) the climatology of that 10-yr period, or C) the climatology over the whole FOSI (68-yrs). <span class="user-mention" data-user-id="28">@Kristen Krumhardt</span>  suggested I start with option C, which is the same as what you suggested in your post, correct?</p>



<a name="61639"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/33-fisheries/topic/CESM-DPLE-postprocessing/near/61639" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="http://127.0.0.1:4000/html/stream/33-fisheries/topic/CESM-DPLE-postprocessing.html#61639">(Aug 15 2022 at 22:11)</a>:</h4>
<p>yes, (C). The anomalies from the forecast runs include the interannual and decadal variability, so the long-term climatology is the right thing</p>



<hr><p>Last updated: May 16 2025 at 17:14 UTC</p>
</html>