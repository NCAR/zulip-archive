<html>
<head><meta charset="utf-8"><title>✔ plotting using DatetimeGregorian? · xarray · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://127.0.0.1:4000/html/stream/42-xarray/index.html">xarray</a></h2>
<h3>Topic: <a href="http://127.0.0.1:4000/html/stream/42-xarray/topic/.E2.9C.94.20plotting.20using.20DatetimeGregorian.3F.html">✔ plotting using DatetimeGregorian?</a></h3>

<hr>


<head><link href="http://127.0.0.1:4000/style.css" rel="stylesheet"></head>

<a name="92415"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/42-xarray/topic/%E2%9C%94%20plotting%20using%20DatetimeGregorian%3F/near/92415" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adrianna Foster <a href="http://127.0.0.1:4000/html/stream/42-xarray/topic/.E2.9C.94.20plotting.20using.20DatetimeGregorian.3F.html#92415">(Nov 28 2023 at 20:59)</a>:</h4>
<p>I've been suddenly getting this error when I try to plot a single grid cell (grabbed with a <code>.sel</code> method)</p>
<div class="codehilite"><pre><span></span><code>float() argument must be a string or a number, not &#39;cftime._cftime.DatetimeGregorian&#39;
</code></pre></div>
<p>my <code>.time</code> coordinates are:</p>
<div class="codehilite"><pre><span></span><code>array([cftime.DatetimeGregorian(2000, 1, 1, 0, 0, 0, 0, has_year_zero=False),
       cftime.DatetimeGregorian(2000, 2, 1, 0, 0, 0, 0, has_year_zero=False),
       cftime.DatetimeGregorian(2000, 3, 1, 0, 0, 0, 0, has_year_zero=False),
       ...,
       cftime.DatetimeGregorian(2049, 10, 1, 0, 0, 0, 0, has_year_zero=False),
       cftime.DatetimeGregorian(2049, 11, 1, 0, 0, 0, 0, has_year_zero=False),
       cftime.DatetimeGregorian(2049, 12, 1, 0, 0, 0, 0, has_year_zero=False)],
      dtype=object
</code></pre></div>
<p>And I read in the full dataset using: </p>
<div class="codehilite"><pre><span></span><code>ds = xr.open_mfdataset(files, combine=&#39;nested&#39;, concat_dim=&#39;time&#39;, parallel=True,
                       preprocess=functools.partial(preprocess, varset=varset))
ds[&#39;time&#39;]   = xr.cftime_range(str(2000), periods=12*50, freq=&#39;MS&#39;) #fix time bug
</code></pre></div>
<p>Any help would be much appreciated!</p>



<a name="92416"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/42-xarray/topic/%E2%9C%94%20plotting%20using%20DatetimeGregorian%3F/near/92416" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adrianna Foster <a href="http://127.0.0.1:4000/html/stream/42-xarray/topic/.E2.9C.94.20plotting.20using.20DatetimeGregorian.3F.html#92416">(Nov 28 2023 at 21:09)</a>:</h4>
<p>nevermind I fixed this by importing <code>nc_time_axis</code>!</p>



<a name="92417"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/42-xarray/topic/%E2%9C%94%20plotting%20using%20DatetimeGregorian%3F/near/92417" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="http://127.0.0.1:4000/html/stream/42-xarray/topic/.E2.9C.94.20plotting.20using.20DatetimeGregorian.3F.html#92417">(Nov 28 2023 at 21:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="257">Adrianna Foster</span> has marked this topic as resolved.</p>



<hr><p>Last updated: May 16 2025 at 17:14 UTC</p>
</html>