<html>
<head><meta charset="utf-8"><title>Casper and NCARCluster no longer working? · dask · Zulip Chat Archive</title></head>
<div class='page-content'><h2>Stream: <a href="https://ncar.github.io/zulip-archive/stream/27-dask/index.html">dask</a></h2>
<h3>Topic: <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html">Casper and NCARCluster no longer working?</a></h3>

<hr>

<base href="https://zulip2.cloud.ucar.edu/">

<head><link href="https://ncar.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="27613"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27613" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Bonnlander <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27613">(Mar 25 2021 at 18:30)</a>:</h4>
<p>Hi,</p>
<p>Up until a few days ago, when I would request a cluster of Dask workers using NCARCluster on Casper, I would see pending requests for those workers using the <code>squeue --me</code> command.   Lately, however, I am not seeing the pending request for workers, and I am never granted those workers.   </p>
<p>Is anyone aware of the issue?   Does SLURM not add worker requests to the queue if it's too full, maybe?</p>



<a name="27615"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27615" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Grover <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27615">(Mar 25 2021 at 18:34)</a>:</h4>
<p>Are you having trouble accessing the actual JupyterHub? Accessing an environment with ncar_jobqueue installed?</p>



<a name="27617"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27617" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Grover <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27617">(Mar 25 2021 at 18:35)</a>:</h4>
<p>Is it moreso an issue of being able to actually access compute nodes?</p>



<a name="27618"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27618" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Bonnlander <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27618">(Mar 25 2021 at 18:35)</a>:</h4>
<p>I am using my own conda environment with JupyterLab installed.   It has been working great for months until recently.</p>



<a name="27620"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27620" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Grover <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27620">(Mar 25 2021 at 18:37)</a>:</h4>
<p>So are you able to get into jupyterlab/notebook? Or is this issue of actually running the notebook? When you login, are you able to request the resources you need?</p>



<a name="27621"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27621" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Bonnlander <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27621">(Mar 25 2021 at 18:37)</a>:</h4>
<p>My question is about whether others have ever seen Dask worker requests not show up as pending in the SLURM queue.   I am running JupyterLab without issues using <code>execdav</code>, as recommended.</p>



<a name="27622"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27622" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Deepak Cherian <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27622">(Mar 25 2021 at 18:39)</a>:</h4>
<p>have you run <code>cluster.scale(...)</code>?</p>



<a name="27623"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27623" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Grover <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27623">(Mar 25 2021 at 18:40)</a>:</h4>
<p>Could it be also the migration to PBS from SLURM on Casper? <a href="https://www2.cisl.ucar.edu/resources/computational-systems/casper/migrating-casper-jobs-slurm-pbs" target="_blank" title="https://www2.cisl.ucar.edu/resources/computational-systems/casper/migrating-casper-jobs-slurm-pbs">https://www2.cisl.ucar.edu/resources/computational-systems/casper/migrating-casper-jobs-slurm-pbs</a></p>



<a name="27624"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27624" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Bonnlander <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27624">(Mar 25 2021 at 18:41)</a>:</h4>
<p>Ah, I commented out the cluster.scale() line!   I didn't realize its importance.  I take it that this is what actually creates the SLURM reqeusts.</p>



<a name="27630"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27630" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Haiying Xu <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27630">(Mar 25 2021 at 19:06)</a>:</h4>
<p>If we use scale(), do we still need to use wait_for_workers?</p>



<a name="27632"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27632" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27632">(Mar 25 2021 at 19:19)</a>:</h4>
<blockquote>
<p>If we use scale(), do we still need to use wait_for_workers?</p>
</blockquote>
<p>It depends... By default, dask doesn't mind proceeding with work if it has access to one worker at least. So, if your workload requires a minimum amount of resources/workers, you may still need the <code>wait_for_workers()</code> call because there's no guarantee that the requested resources (via <code>.scale()</code>) will be available at the same time.</p>



<a name="27637"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27637" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Haiying Xu <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27637">(Mar 25 2021 at 19:26)</a>:</h4>
<p>But recently, I scale to the specific total number of workers, but my codes still stuck at wait_for_workers, then one of the node retired after some timeout time, thus my codes stuck forever.</p>



<a name="27638"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/27638" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#27638">(Mar 25 2021 at 19:29)</a>:</h4>
<blockquote>
<p>But recently, I scale to the specific total number of workers, but my codes still stuck at wait_for_workers, then one of the node retired after some timeout time, thus my codes stuck forever.</p>
</blockquote>
<p>Could you share a minimal script to reproduce or point me to the code you are currently using? It's hard to know what's going on unless I see your code</p>



<a name="29082"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29082" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Wieder <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29082">(Apr 09 2021 at 16:33)</a>:</h4>
<p>I feel really daft asking this question, but I'm requesting 10 workers and 400 Gb of memory with the following <br>
I'd assumed the cluster.scale(2) would get me 20 workers and 800 GB of memory, but this isn't happening.<br>
What am I doing wrong?</p>
<p>from dask_jobqueue import PBSCluster<br>
from dask.distributed import Client<br>
cluster = PBSCluster(<br>
      cores=ncores, # The number of cores you want<br>
      memory=nmem, # Amount of memory<br>
      processes=ncores, # How many processes<br>
      queue='casper', # The type of queue to utilize (/glade/u/apps/dav/opt/usr/bin/execcasper)<br>
      resource_spec='select=1:ncpus='+str(ncores)+':mem='+nmem, # Specify resources<br>
      project='P93300641', # Input your project ID here<br>
      walltime='1:00:00', # Amount of wall time<br>
      interface='ib0', # Interface to use<br>
      extra=["--lifetime", "55m", "--lifetime-stagger", "4m"],<br>
    )<br>
    # Scale up<br>
    cluster.scale(2)</p>



<a name="29083"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29083" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29083">(Apr 09 2021 at 16:33)</a>:</h4>
<p>are you on Casper PBS Batch?</p>



<a name="29084"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29084" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Wieder <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29084">(Apr 09 2021 at 16:42)</a>:</h4>
<p>yes</p>



<a name="29085"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29085" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29085">(Apr 09 2021 at 16:45)</a>:</h4>
<p>What <em>is</em> happening?</p>



<a name="29086"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29086" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29086">(Apr 09 2021 at 16:46)</a>:</h4>
<p>I have a little wrapper for convenience (since <code>ncar-jobqueue</code> is currently broken):</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_ClusterClient</span><span class="p">():</span>
    <span class="kn">import</span> <span class="nn">dask</span>
    <span class="kn">from</span> <span class="nn">dask_jobqueue</span> <span class="kn">import</span> <span class="n">PBSCluster</span>
    <span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">Client</span>
    <span class="n">cluster</span> <span class="o">=</span> <span class="n">PBSCluster</span><span class="p">(</span>
        <span class="n">cores</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">memory</span><span class="o">=</span><span class="s1">&#39;25GB&#39;</span><span class="p">,</span>
        <span class="n">processes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;casper&#39;</span><span class="p">,</span>
        <span class="n">local_directory</span><span class="o">=</span><span class="s1">&#39;$TMPDIR&#39;</span><span class="p">,</span>
        <span class="n">log_directory</span><span class="o">=</span><span class="s1">&#39;$TMPDIR&#39;</span><span class="p">,</span>
        <span class="n">resource_spec</span><span class="o">=</span><span class="s1">&#39;select=1:ncpus=1:mem=25GB&#39;</span><span class="p">,</span>
        <span class="n">project</span><span class="o">=</span><span class="s1">&#39;NCGD0011&#39;</span><span class="p">,</span>
        <span class="n">walltime</span><span class="o">=</span><span class="s1">&#39;01:00:00&#39;</span><span class="p">,</span>
        <span class="n">interface</span><span class="o">=</span><span class="s1">&#39;ib0&#39;</span><span class="p">,)</span>

    <span class="n">dask</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">({</span>
        <span class="s1">&#39;distributed.dashboard.link&#39;</span><span class="p">:</span>
        <span class="s1">&#39;https://jupyterhub.hpc.ucar.edu/stable/user/</span><span class="si">{USER}</span><span class="s1">/proxy/</span><span class="si">{port}</span><span class="s1">/status&#39;</span>
    <span class="p">})</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cluster</span><span class="p">,</span> <span class="n">client</span>
</pre></div>


<p>Which I call like this</p>
<div class="codehilite"><pre><span></span><span class="n">cluster</span><span class="p">,</span> <span class="n">client</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_ClusterClient</span><span class="p">()</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="c1">#adapt(minimum_jobs=0, maximum_jobs=24)</span>
</pre></div>


<p>Works!  </p>
<div class="codehilite"><pre><span></span>qstat -u $USER
</pre></div>


<p>tells me my worker jobs are running. Dashboard is active, etc.</p>



<a name="29089"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29089" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Grover <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29089">(Apr 09 2021 at 16:58)</a>:</h4>
<p>So are you requesting 40 GB of memory per worker then? Or are you looking for 400 GB per worker?</p>



<a name="29090"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29090" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Grover <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29090">(Apr 09 2021 at 17:01)</a>:</h4>
<p>The following </p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">dask_jobqueue</span> <span class="kn">import</span> <span class="n">PBSCluster</span>
<span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="n">ncores</span><span class="o">=</span><span class="mi">1</span>
<span class="n">nmem</span> <span class="o">=</span> <span class="s1">&#39;40GB&#39;</span>

<span class="n">cluster</span> <span class="o">=</span> <span class="n">PBSCluster</span><span class="p">(</span>
    <span class="n">cores</span><span class="o">=</span><span class="n">ncores</span><span class="p">,</span> <span class="c1"># The number of cores you want</span>
    <span class="n">memory</span><span class="o">=</span><span class="n">nmem</span><span class="p">,</span> <span class="c1"># Amount of memory</span>
    <span class="n">processes</span><span class="o">=</span><span class="n">ncores</span><span class="p">,</span> <span class="c1"># How many processes</span>
    <span class="n">queue</span><span class="o">=</span><span class="s1">&#39;casper&#39;</span><span class="p">,</span> <span class="c1"># The type of queue to utilize (/glade/u/apps/dav/opt/usr/bin/execcasper)</span>
    <span class="n">resource_spec</span><span class="o">=</span><span class="s1">&#39;select=1:ncpus=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ncores</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;:mem=&#39;</span><span class="o">+</span><span class="n">nmem</span><span class="p">,</span> <span class="c1"># Specify resources</span>
    <span class="n">project</span><span class="o">=</span><span class="s1">&#39;NCGD0011&#39;</span><span class="p">,</span> <span class="c1"># Input your project ID here</span>
    <span class="n">walltime</span><span class="o">=</span><span class="s1">&#39;1:00:00&#39;</span><span class="p">,</span> <span class="c1"># Amount of wall time</span>
    <span class="n">interface</span><span class="o">=</span><span class="s1">&#39;ib0&#39;</span><span class="p">,</span> <span class="c1"># Interface to use</span>
<span class="p">)</span>

<span class="n">cluster</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>


<p>results in 10 workers w/ 10 cores and 400 GB of memory. If you increase <code>cluster.scale(n)</code>  to <code> n=20</code>, the result is 20 workers with 800 GB of memory.</p>



<a name="29091"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29091" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Wieder <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29091">(Apr 09 2021 at 17:01)</a>:</h4>
<p>no, 40 GB / worker.  Matt's example feems to work fine, if I  use <code>.scale(20)</code> I get the 800 GB of memory needed</p>



<a name="29092"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29092" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Grover <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29092">(Apr 09 2021 at 17:03)</a>:</h4>
<p>I guess the key would be take however much memory you are looking for in total, divided by the number of workers you would like to get the suggested <code>nmem</code>. Thanks for asking this question!</p>



<a name="29093"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29093" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Wieder <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29093">(Apr 09 2021 at 17:21)</a>:</h4>
<p>THanks <span class="user-mention" data-user-id="134">@Max Grover</span> and <span class="user-mention" data-user-id="14">@Matt Long</span></p>



<a name="29268"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29268" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Clyne <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29268">(Apr 09 2021 at 22:35)</a>:</h4>
<p>FYI I'm using NCARCluster for the first time, launching a "casper batch" session via <a href="https://jupyterhub.hpc.ucar.edu/" target="_blank" title="https://jupyterhub.hpc.ucar.edu/">https://jupyterhub.hpc.ucar.edu/</a>, and finding that 'identify_host()' cannot identify casper as "casper".</p>



<a name="29270"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29270" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29270">(Apr 10 2021 at 14:00)</a>:</h4>
<p>This is a known issue, related to the switch to PBS. See here: <a href="https://github.com/NCAR/ncar-jobqueue/issues/40" target="_blank" title="https://github.com/NCAR/ncar-jobqueue/issues/40">https://github.com/NCAR/ncar-jobqueue/issues/40</a></p>



<a name="29558"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29558" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29558">(Apr 14 2021 at 22:39)</a>:</h4>
<blockquote>
<p>This is a known issue, related to the switch to PBS. See here: <a href="https://github.com/NCAR/ncar-jobqueue/issues/40" target="_blank" title="https://github.com/NCAR/ncar-jobqueue/issues/40">https://github.com/NCAR/ncar-jobqueue/issues/40</a></p>
</blockquote>
<p>This issue has been resolved in the latest release of <code>ncar-jobqueue</code>. You can upgrade to the latest version via </p>
<div class="codehilite"><pre><span></span>conda install -c conda-forge ncar-jobqueue<span class="o">==</span><span class="m">2021</span>.4.14
</pre></div>


<p>or </p>
<div class="codehilite"><pre><span></span>python -m pip install ncar-jobqueue --upgrade
</pre></div>


<hr>
<p><strong>NOTE</strong></p>
<ul>
<li><strong>Please report any issues you might experience with this version</strong> by opening new issues here: <a href="https://github.com/NCAR/ncar-jobqueue/issues" target="_blank" title="https://github.com/NCAR/ncar-jobqueue/issues">https://github.com/NCAR/ncar-jobqueue/issues</a></li>
<li>There is some limited docs <a href="https://github.com/NCAR/ncar-jobqueue#configuration" target="_blank" title="https://github.com/NCAR/ncar-jobqueue#configuration">here</a> ;)</li>
</ul>



<a name="29560"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29560" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Paul <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29560">(Apr 14 2021 at 23:00)</a>:</h4>
<p>You're awesome, <span class="user-mention" data-user-id="13">@Anderson Banihirwe</span>!  Thank you!</p>



<a name="29561"></a>
<h4><a href="https://zulip2.cloud.ucar.edu/#narrow/stream/27-dask/topic/Casper%20and%20NCARCluster%20no%20longer%20working%3F/near/29561" class="zl"><img src="https://ncar.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Long <a href="https://ncar.github.io/zulip-archive/stream/27-dask/topic/Casper.20and.20NCARCluster.20no.20longer.20working.3F.html#29561">(Apr 14 2021 at 23:24)</a>:</h4>
<p>I second that assessment!!</p>



<hr><p>Last updated: Oct 02 2021 at 10:06 UTC</p>
</html></div>