<html>
<head><meta charset="utf-8"><title>Dask Dashboard: Subprotocols issue with bokeh · dask · Zulip Chat Archive</title></head>
<h2>Stream: <a href="http://127.0.0.1:4000/html/stream/27-dask/index.html">dask</a></h2>
<h3>Topic: <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html">Dask Dashboard: Subprotocols issue with bokeh</a></h3>

<hr>


<head><link href="http://127.0.0.1:4000/style.css" rel="stylesheet"></head>

<a name="52149"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52149" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Wieder <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52149">(Mar 15 2022 at 21:23)</a>:</h4>
<p>I'm not even sure what's happening now.  The old call and packages I've been doing to with a function that gets workers by calling PBSCluster now throws a bunch of errors. I'm still able to get workers, but the start of the error message is below<br>
<code>tornado.application - ERROR - Uncaught exception GET /individual-workers/ws (::1)
HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/individual-workers/ws', version='HTTP/1.1', remote_ip='::1')
Traceback (most recent call last):
  File "/glade/u/home/wwieder/miniconda3/envs/lens-py/lib/python3.7/site-packages/tornado/websocket.py", line 954, in _accept_connection</code></p>
<p>are there packages I should be updating? (note the same thing happened with a different environment that used dask and dask-core  v 2021.10.0 ).  </p>
<p>suggestions appreciated.</p>



<a name="52150"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52150" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52150">(Mar 15 2022 at 21:27)</a>:</h4>
<p><span class="user-mention" data-user-id="67">@Will Wieder</span>, can you post the full traceback/error message you are getting?</p>



<a name="52274"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52274" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Wieder <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52274">(Mar 16 2022 at 18:21)</a>:</h4>
<p>/glade/u/home/wwieder/miniconda3/envs/tiff2nc/lib/python3.7/site-packages/dask_jobqueue/core.py:20: FutureWarning: tmpfile is deprecated and will be removed in a future release. Please use dask.utils.tmpfile instead.<br>
  from distributed.utils import tmpfile</p>
<p>tornado.application - ERROR - Uncaught exception GET /individual-workers/ws (::1)<br>
HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/individual-workers/ws', version='HTTP/1.1', remote_ip='::1')<br>
Traceback (most recent call last):<br>
  File "/glade/u/home/wwieder/miniconda3/envs/tiff2nc/lib/python3.7/site-packages/tornado/websocket.py", line 954, in _accept_connection<br>
    open_result = handler.open(*handler.open_args, **handler.open_kwargs)<br>
  File "/glade/u/home/wwieder/miniconda3/envs/tiff2nc/lib/python3.7/site-packages/tornado/web.py", line 3173, in wrapper<br>
    return method(self, *args, **kwargs)<br>
  File "/glade/u/home/wwieder/miniconda3/envs/tiff2nc/lib/python3.7/site-packages/bokeh/server/views/ws.py", line 137, in open<br>
    raise ProtocolError("Subprotocol header is not 'bokeh'")<br>
bokeh.protocol.exceptions.ProtocolError: Subprotocol header is not 'bokeh'<br>
tornado.application - ERROR - Uncaught exception GET /individual-nprocessing/ws (::1)<br>
HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/individual-nprocessing/ws', version='HTTP/1.1', remote_ip='::1')<br>
Traceback (most recent call last):<br>
  File "/glade/u/home/wwieder/miniconda3/envs/tiff2nc/lib/python3.7/site-packages/tornado/websocket.py", line 954, in _accept_connection<br>
    open_result = handler.open(*handler.open_args, **handler.open_kwargs)<br>
  File "/glade/u/home/wwieder/miniconda3/envs/tiff2nc/lib/python3.7/site-packages/tornado/web.py", line 3173, in wrapper<br>
    return method(self, *args, **kwargs)<br>
  File "/glade/u/home/wwieder/miniconda3/envs/tiff2nc/lib/python3.7/site-packages/bokeh/server/views/ws.py", line 137, in open<br>
    raise ProtocolError("Subprotocol header is not 'bokeh'")<br>
bokeh.protocol.exceptions.ProtocolError: Subprotocol header is not 'bokeh'</p>



<a name="52275"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52275" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52275">(Mar 16 2022 at 18:48)</a>:</h4>
<p>Are you running this notebook from the JupyterHub?</p>



<a name="52276"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52276" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52276">(Mar 16 2022 at 18:48)</a>:</h4>
<p>Or are you launching the Jupyter server yourself?</p>



<a name="52277"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52277" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Wieder <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52277">(Mar 16 2022 at 19:15)</a>:</h4>
<p>from the server I logged into with jupyter-forward.  The code never grabs workers when I log in via JupyterHub.</p>



<a name="52282"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52282" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52282">(Mar 16 2022 at 19:33)</a>:</h4>
<p>Installing <code>jupyter-server-proxy</code> into the same environment your notebook is running from, rather than where your kernels are should address the issue. </p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>conda install -c conda-forge jupyter-server-proxy
</code></pre></div>



<a name="52283"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52283" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anderson Banihirwe <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52283">(Mar 16 2022 at 19:37)</a>:</h4>
<p>You may want to install the <code>dask-labextension</code> instead (it depends on <code>jupyter-server-proxy</code>) into the same environment your notebook is running from... </p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>conda install -c conda-forge dask-labextension
</code></pre></div>



<a name="52306"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52306" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Wieder <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52306">(Mar 17 2022 at 11:42)</a>:</h4>
<p>Yes, this resolved the issues.  Thanks <span class="user-mention" data-user-id="13">@Anderson Banihirwe</span></p>



<a name="52310"></a>
<h4><a href="https://zulip2.cloud.ucar.edu#narrow/stream/27-dask/topic/Dask%20Dashboard%3A%20Subprotocols%20issue%20with%20bokeh/near/52310" class="zl"><img src="../../../assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="http://127.0.0.1:4000/html/stream/27-dask/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh.html#52310">(Mar 17 2022 at 13:24)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="41" href="/#narrow/stream/41-ESDS/topic/Dask.20Dashboard.3A.20Subprotocols.20issue.20with.20bokeh">#ESDS &gt; Dask Dashboard: Subprotocols issue with bokeh</a> by <span class="user-mention silent" data-user-id="13">Anderson Banihirwe</span></p>



<hr><p>Last updated: May 16 2025 at 17:14 UTC</p>
</html>