[
    {
        "content": "<p>I am using the \"MPAS with Datashader and Geoviews\" notebook from the <span class=\"user-group-mention\" data-user-group-id=\"1\">@geocat</span>-examples library to plot MPAS data. So far so good as global plots are concerned (it's actually pretty cool). Is there a way to start with a regional subdomain instead of the full globe? I am thinking of something like <code>ax.set_extent([lon1, lon2, lat1, lat2])</code>, which is what I use when plotting maps with cartopy. I know I could zoom in, but I am more interested in something that can be scripted.</p>",
        "id": 55113,
        "sender_full_name": "Falko Judt",
        "timestamp": 1652894577
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"273\">@Falko Judt</span> ! This is a great question and reminds me of a good potential study for our SIParCS intern who will be implementing some new notebooks for unstructured grid visualizations in the coming weeks. We will get him start to learn Datashader stack first, then this would make a great case.</p>",
        "id": 55128,
        "sender_full_name": "Orhan Eroglu",
        "timestamp": 1652904093
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"273\">Falko Judt</span> <a href=\"#narrow/stream/10-python-questions/topic/set.20extent.20of.20map.20in.20.22MPAS.20with.20Datashader.20and.20Geoviews.22/near/55113\">said</a>:</p>\n<blockquote>\n<p>I am using the \"MPAS with Datashader and Geoviews\" notebook from the <span class=\"user-group-mention silent\" data-user-group-id=\"1\">geocat</span>-examples library to plot MPAS data. So far so good as global plots are concerned (it's actually pretty cool). Is there a way to start with a regional subdomain instead of the full globe? I am thinking of something like <code>ax.set_extent([lon1, lon2, lat1, lat2])</code>, which is what I use when plotting maps with cartopy. I know I could zoom in, but I am more interested in something that can be scripted.</p>\n</blockquote>\n<p>Hi <span class=\"user-mention\" data-user-id=\"273\">@Falko Judt</span>!  The closest alternative that I found to <code>ax.set_extent()</code> is adding a <code>xlim</code> and <code>ylim</code> to our rasterized image options. Since the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> coordinates don't directly map to physical lat/lon values, a little bit a manual searching is required to get your bounding box. However, once you have your <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> bounds ((<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">x_{left}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mrow><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">x_{right}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>) and (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mrow><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">y_{left}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mrow><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">y_{right}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>)) you can do this:</p>\n<p><code>rasterized = hds_rasterize(trimesh, aggregator='mean', precompute=True).opts(xlim=(x_left, x_right), ylim=(y_left, y_right))</code></p>\n<p>This will crop the global map between the the bounds that you set. It still allows you to scroll and zoom around, but initially restricts our image to that region. One issue that I've noticed is that it introduces some distortion when you zoom out, but I'll see if there's any way to fix that. </p>\n<p>For example, I chose this pair to roughly get most of North and Central America: <code>xlim=(-1.1e7, -6e6)</code> and <code>ylim=(0, 6.5e6)</code></p>\n<p><a href=\"/user_uploads/2/a2/TkyAMYh4qsfAMish-CyS3xB2/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/a2/TkyAMYh4qsfAMish-CyS3xB2/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/a2/TkyAMYh4qsfAMish-CyS3xB2/image.png\"></a></div>",
        "id": 55795,
        "sender_full_name": "Philip Chmielowiec",
        "timestamp": 1653799418
    },
    {
        "content": "<p>Using the PlateCarree projection actually gets rid of the manual selection issue, you can use lat/lon values as your bounding points and it should map 1:1 to the x/y pixels in the image. <a href=\"/user_uploads/2/94/r2VZRsY7Xvpx5k4hi-I4JIqd/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/94/r2VZRsY7Xvpx5k4hi-I4JIqd/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/94/r2VZRsY7Xvpx5k4hi-I4JIqd/image.png\"></a></div>",
        "id": 55863,
        "sender_full_name": "Philip Chmielowiec",
        "timestamp": 1654116772
    }
]