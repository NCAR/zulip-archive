[
    {
        "content": "<p>I'm working on an esm-intake catalog for the NA-CORDEX dataset.  We'll use that to convert the dataset to zarr format, then upload it to AWS as a contribution to the Amazon Sustainability Data Initiative.  </p>\n<p>I also want to develop some pangeo jupyter notebooks for working with the data.  I'm currently thinking we'll do some of the standard visualizations that we use for QA and general evaluation, but I'm open to ideas and suggestions.</p>",
        "id": 3061,
        "sender_full_name": "Seth McGinnis",
        "timestamp": 1584125054
    },
    {
        "content": "<p>I cloned the intake-esm-datastore repo on github and have added a first version of the catalog and JSON for the NA-CORDEX dataset:  <a href=\"https://github.com/sethmcg/intake-esm-datastore\" target=\"_blank\" title=\"https://github.com/sethmcg/intake-esm-datastore\">https://github.com/sethmcg/intake-esm-datastore</a></p>\n<p>I think it should be functional, but I'm not sure where to go from here.  How do I check and test it?  <span class=\"user-mention\" data-user-id=\"13\">@Anderson Banihirwe</span> ?</p>",
        "id": 3181,
        "sender_full_name": "Seth McGinnis",
        "timestamp": 1584135604
    },
    {
        "content": "<p>There seems to be some formatting errors in the json:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]:</span> <span class=\"kn\">import</span> <span class=\"nn\">intake</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]:</span> <span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;intake-esm-datastore/catalogs/glade-na-cordex.json&quot;</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">]:</span> <span class=\"n\">col</span> <span class=\"o\">=</span> <span class=\"n\">intake</span><span class=\"o\">.</span><span class=\"n\">open_esm_datastore</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span>\n<span class=\"o\">---------------------------------------------------------------------------</span>\n<span class=\"n\">JSONDecodeError</span>                           <span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">)</span>\n<span class=\"o\">&lt;</span><span class=\"n\">ipython</span><span class=\"o\">-</span><span class=\"nb\">input</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"o\">-</span><span class=\"n\">a5564d66b493</span><span class=\"o\">&gt;</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n<span class=\"o\">----&gt;</span> <span class=\"mi\">1</span> <span class=\"n\">col</span> <span class=\"o\">=</span> <span class=\"n\">intake</span><span class=\"o\">.</span><span class=\"n\">open_esm_datastore</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span>\n\n<span class=\"o\">/</span><span class=\"n\">glade</span><span class=\"o\">/</span><span class=\"n\">work</span><span class=\"o\">/</span><span class=\"n\">abanihi</span><span class=\"o\">/</span><span class=\"n\">softwares</span><span class=\"o\">/</span><span class=\"n\">miniconda3</span><span class=\"o\">/</span><span class=\"n\">envs</span><span class=\"o\">/</span><span class=\"n\">analysis</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python3</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">intake_esm</span><span class=\"o\">/</span><span class=\"n\">core</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">esmcol_path</span><span class=\"p\">,</span> <span class=\"n\">progressbar</span><span class=\"p\">,</span> <span class=\"n\">log_level</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n     <span class=\"mi\">75</span>         <span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">setLevel</span><span class=\"p\">(</span><span class=\"n\">numeric_log_level</span><span class=\"p\">)</span>\n     <span class=\"mi\">76</span>         <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">progressbar</span> <span class=\"o\">=</span> <span class=\"n\">progressbar</span>\n<span class=\"o\">---&gt;</span> <span class=\"mi\">77</span>         <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_col_data</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">esmcol_path</span> <span class=\"o\">=</span> <span class=\"n\">_fetch_and_parse_json</span><span class=\"p\">(</span><span class=\"n\">esmcol_path</span><span class=\"p\">)</span>\n     <span class=\"mi\">78</span>         <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">df</span> <span class=\"o\">=</span> <span class=\"n\">_fetch_catalog</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_col_data</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">esmcol_path</span><span class=\"p\">)</span>\n     <span class=\"mi\">79</span>         <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_entries</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n\n<span class=\"o\">/</span><span class=\"n\">glade</span><span class=\"o\">/</span><span class=\"n\">work</span><span class=\"o\">/</span><span class=\"n\">abanihi</span><span class=\"o\">/</span><span class=\"n\">softwares</span><span class=\"o\">/</span><span class=\"n\">miniconda3</span><span class=\"o\">/</span><span class=\"n\">envs</span><span class=\"o\">/</span><span class=\"n\">analysis</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python3</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">intake_esm</span><span class=\"o\">/</span><span class=\"n\">utils</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"n\">_fetch_and_parse_json</span><span class=\"p\">(</span><span class=\"n\">input_path</span><span class=\"p\">)</span>\n     <span class=\"mi\">62</span>\n     <span class=\"mi\">63</span>     <span class=\"k\">except</span> <span class=\"ne\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n<span class=\"o\">---&gt;</span> <span class=\"mi\">64</span>         <span class=\"k\">raise</span> <span class=\"n\">e</span>\n     <span class=\"mi\">65</span>\n     <span class=\"mi\">66</span>     <span class=\"k\">return</span> <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">input_path</span>\n\n<span class=\"o\">/</span><span class=\"n\">glade</span><span class=\"o\">/</span><span class=\"n\">work</span><span class=\"o\">/</span><span class=\"n\">abanihi</span><span class=\"o\">/</span><span class=\"n\">softwares</span><span class=\"o\">/</span><span class=\"n\">miniconda3</span><span class=\"o\">/</span><span class=\"n\">envs</span><span class=\"o\">/</span><span class=\"n\">analysis</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python3</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">site</span><span class=\"o\">-</span><span class=\"n\">packages</span><span class=\"o\">/</span><span class=\"n\">intake_esm</span><span class=\"o\">/</span><span class=\"n\">utils</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"n\">_fetch_and_parse_json</span><span class=\"p\">(</span><span class=\"n\">input_path</span><span class=\"p\">)</span>\n     <span class=\"mi\">59</span>             <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">input_path</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n     <span class=\"mi\">60</span>                 <span class=\"n\">logger</span><span class=\"o\">.</span><span class=\"n\">info</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"s1\">&#39;Loading ESMCol from filesystem: {input_path}&#39;</span><span class=\"p\">)</span>\n<span class=\"o\">---&gt;</span> <span class=\"mi\">61</span>                 <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">)</span>\n     <span class=\"mi\">62</span>\n     <span class=\"mi\">63</span>     <span class=\"k\">except</span> <span class=\"ne\">Exception</span> <span class=\"k\">as</span> <span class=\"n\">e</span><span class=\"p\">:</span>\n\n<span class=\"o\">/</span><span class=\"n\">glade</span><span class=\"o\">/</span><span class=\"n\">work</span><span class=\"o\">/</span><span class=\"n\">abanihi</span><span class=\"o\">/</span><span class=\"n\">softwares</span><span class=\"o\">/</span><span class=\"n\">miniconda3</span><span class=\"o\">/</span><span class=\"n\">envs</span><span class=\"o\">/</span><span class=\"n\">analysis</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python3</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">json</span><span class=\"o\">/</span><span class=\"fm\">__init__</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"n\">load</span><span class=\"p\">(</span><span class=\"n\">fp</span><span class=\"p\">,</span> <span class=\"bp\">cls</span><span class=\"p\">,</span> <span class=\"n\">object_hook</span><span class=\"p\">,</span> <span class=\"n\">parse_float</span><span class=\"p\">,</span> <span class=\"n\">parse_int</span><span class=\"p\">,</span> <span class=\"n\">parse_constant</span><span class=\"p\">,</span> <span class=\"n\">object_pairs_hook</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span>\n    <span class=\"mi\">294</span>         <span class=\"bp\">cls</span><span class=\"o\">=</span><span class=\"bp\">cls</span><span class=\"p\">,</span> <span class=\"n\">object_hook</span><span class=\"o\">=</span><span class=\"n\">object_hook</span><span class=\"p\">,</span>\n    <span class=\"mi\">295</span>         <span class=\"n\">parse_float</span><span class=\"o\">=</span><span class=\"n\">parse_float</span><span class=\"p\">,</span> <span class=\"n\">parse_int</span><span class=\"o\">=</span><span class=\"n\">parse_int</span><span class=\"p\">,</span>\n<span class=\"o\">--&gt;</span> <span class=\"mi\">296</span>         <span class=\"n\">parse_constant</span><span class=\"o\">=</span><span class=\"n\">parse_constant</span><span class=\"p\">,</span> <span class=\"n\">object_pairs_hook</span><span class=\"o\">=</span><span class=\"n\">object_pairs_hook</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span>\n    <span class=\"mi\">297</span>\n    <span class=\"mi\">298</span>\n\n<span class=\"o\">/</span><span class=\"n\">glade</span><span class=\"o\">/</span><span class=\"n\">work</span><span class=\"o\">/</span><span class=\"n\">abanihi</span><span class=\"o\">/</span><span class=\"n\">softwares</span><span class=\"o\">/</span><span class=\"n\">miniconda3</span><span class=\"o\">/</span><span class=\"n\">envs</span><span class=\"o\">/</span><span class=\"n\">analysis</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python3</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">json</span><span class=\"o\">/</span><span class=\"fm\">__init__</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"p\">,</span> <span class=\"bp\">cls</span><span class=\"p\">,</span> <span class=\"n\">object_hook</span><span class=\"p\">,</span> <span class=\"n\">parse_float</span><span class=\"p\">,</span> <span class=\"n\">parse_int</span><span class=\"p\">,</span> <span class=\"n\">parse_constant</span><span class=\"p\">,</span> <span class=\"n\">object_pairs_hook</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kw</span><span class=\"p\">)</span>\n    <span class=\"mi\">346</span>             <span class=\"n\">parse_int</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span> <span class=\"ow\">and</span> <span class=\"n\">parse_float</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span> <span class=\"ow\">and</span>\n    <span class=\"mi\">347</span>             <span class=\"n\">parse_constant</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span> <span class=\"ow\">and</span> <span class=\"n\">object_pairs_hook</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span> <span class=\"ow\">and</span> <span class=\"ow\">not</span> <span class=\"n\">kw</span><span class=\"p\">):</span>\n<span class=\"o\">--&gt;</span> <span class=\"mi\">348</span>         <span class=\"k\">return</span> <span class=\"n\">_default_decoder</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span>\n    <span class=\"mi\">349</span>     <span class=\"k\">if</span> <span class=\"bp\">cls</span> <span class=\"ow\">is</span> <span class=\"bp\">None</span><span class=\"p\">:</span>\n    <span class=\"mi\">350</span>         <span class=\"bp\">cls</span> <span class=\"o\">=</span> <span class=\"n\">JSONDecoder</span>\n\n<span class=\"o\">/</span><span class=\"n\">glade</span><span class=\"o\">/</span><span class=\"n\">work</span><span class=\"o\">/</span><span class=\"n\">abanihi</span><span class=\"o\">/</span><span class=\"n\">softwares</span><span class=\"o\">/</span><span class=\"n\">miniconda3</span><span class=\"o\">/</span><span class=\"n\">envs</span><span class=\"o\">/</span><span class=\"n\">analysis</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">python3</span><span class=\"o\">.</span><span class=\"mi\">7</span><span class=\"o\">/</span><span class=\"n\">json</span><span class=\"o\">/</span><span class=\"n\">decoder</span><span class=\"o\">.</span><span class=\"n\">py</span> <span class=\"ow\">in</span> <span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">_w</span><span class=\"p\">)</span>\n    <span class=\"mi\">335</span>\n    <span class=\"mi\">336</span>         <span class=\"s2\">&quot;&quot;&quot;</span>\n<span class=\"s2\">--&gt; 337         obj, end = self.raw_decode(s, idx=_w(s, 0).end())</span>\n<span class=\"s2\">    338         end = _w(s, end).end()</span>\n<span class=\"s2\">    339         if end != len(s):</span>\n\n<span class=\"s2\">/glade/work/abanihi/softwares/miniconda3/envs/analysis/lib/python3.7/json/decoder.py in raw_decode(self, s, idx)</span>\n<span class=\"s2\">    351         &quot;&quot;&quot;</span>\n    <span class=\"mi\">352</span>         <span class=\"k\">try</span><span class=\"p\">:</span>\n<span class=\"o\">--&gt;</span> <span class=\"mi\">353</span>             <span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">end</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">scan_once</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">idx</span><span class=\"p\">)</span>\n    <span class=\"mi\">354</span>         <span class=\"k\">except</span> <span class=\"ne\">StopIteration</span> <span class=\"k\">as</span> <span class=\"n\">err</span><span class=\"p\">:</span>\n    <span class=\"mi\">355</span>             <span class=\"k\">raise</span> <span class=\"n\">JSONDecodeError</span><span class=\"p\">(</span><span class=\"s2\">&quot;Expecting value&quot;</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">err</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">)</span> <span class=\"kn\">from</span> <span class=\"bp\">None</span>\n\n<span class=\"n\">JSONDecodeError</span><span class=\"p\">:</span> <span class=\"n\">Expecting</span> <span class=\"s1\">&#39;:&#39;</span> <span class=\"n\">delimiter</span><span class=\"p\">:</span> <span class=\"n\">line</span> <span class=\"mi\">32</span> <span class=\"n\">column</span> <span class=\"mi\">17</span> <span class=\"p\">(</span><span class=\"n\">char</span> <span class=\"mi\">1020</span><span class=\"p\">)</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">7</span><span class=\"p\">]:</span>\n</pre></div>",
        "id": 3193,
        "sender_full_name": "Anderson Banihirwe",
        "timestamp": 1584137378
    },
    {
        "content": "<p>To validate the json against the schema, we have a tool (esmcol-validator), you can install it via conda or pip</p>",
        "id": 3195,
        "sender_full_name": "Anderson Banihirwe",
        "timestamp": 1584137466
    },
    {
        "content": "<p>Instructions  on how to install it are available here: <a href=\"https://github.com/NCAR/esmcol-validator\" target=\"_blank\" title=\"https://github.com/NCAR/esmcol-validator\">https://github.com/NCAR/esmcol-validator</a></p>",
        "id": 3197,
        "sender_full_name": "Anderson Banihirwe",
        "timestamp": 1584137500
    },
    {
        "content": "<p>Once it is installed, you can run</p>\n<div class=\"codehilite\"><pre><span></span>$ esmcol-validator glade-na-cordex.json\n</pre></div>",
        "id": 3198,
        "sender_full_name": "Anderson Banihirwe",
        "timestamp": 1584137535
    },
    {
        "content": "<p>Thanks!  Looks like it's time for me to learn how to manage pull requests, so I will return to this later.</p>",
        "id": 3271,
        "sender_full_name": "Seth McGinnis",
        "timestamp": 1584142734
    }
]