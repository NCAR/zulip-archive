[
    {
        "content": "<p>I want to know if my working directory is up-to-date with the remote branch but I'm getting different results if I use<br>\n% git diff origin develop<br>\n(17 lines output)<br>\n% git diff origin/develop<br>\n(9K lines output)</p>\n<p>The latter (larger number of diffs) is what I expect. I wonder if there is something wrong with how I'm tracking the remote branch that causes the initial to fail.</p>\n<p>% git status<br>\nOn branch develop<br>\nYour branch is up to date with 'origin/develop'.<br>\n...<br>\nChanges not staged for commit:<br>\n        modified:   data/fieldlist_NCAR.jsonc</p>\n<p>[These are the 17 lines different. But I have updated the remote branch on github so would expect the larger number of diffs].</p>\n<p>TL;DR</p>\n<p>My understanding of this from<br>\n<a href=\"https://stackoverflow.com/questions/18137175/in-git-what-is-the-difference-between-origin-master-vs-origin-master\">https://stackoverflow.com/questions/18137175/in-git-what-is-the-difference-between-origin-master-vs-origin-master</a><br>\nis that  my working dir is on the local branch called develop and that local branch is up to date with <br>\nthe local branch called origin/develop which is supposed to be tracking the<br>\nbranch named develop on the remote named origin.<br>\n( Feel free to comment on this if you see a conceptual error. The fact that there is a local branch called develop and another <em>local</em> called origin/develop which tracks a remote branch is strange to me. Why tthe two?!)</p>\n<p>If this is true, I would expect the command:<br>\n% git diff origin develop</p>\n<p>to return the same result. That is, what is the difference between the code<br>\nin the local working directory compared to the branch named develop on the<br>\nremote named origin.</p>\n<p>However, this returns a huge diff (95325 lines vs 17 in previous case).<br>\nIt is actually what I expect, as I used github to merge changes from<br>\nanother remote into my origin develop.</p>\n<p>So the question, in case you haven't already identified an error:<br>\n is the difference between the results of the two commands an indication<br>\nthat I've made an error, and/or that my origin/develop is not actually<br>\ntracking origin develop ?</p>\n<p>% cat .git/config <br>\n[core]<br>\n    repositoryformatversion = 0<br>\n    filemode = true<br>\n    bare = false<br>\n    logallrefupdates = true<br>\n[remote \"origin\"]<br>\n    url = git@github.com:bitterbark/MDTF-diagnostics.git<br>\n    fetch = +refs/heads/<em>:refs/remotes/origin/</em><br>\n[branch \"master\"]<br>\n    remote = origin<br>\n    merge = refs/heads/master<br>\n[remote \"gfdl\"]<br>\n    url = git@github.com:NOAA-GFDL/MDTF-diagnostics.git<br>\n    fetch = +refs/heads/<em>:refs/remotes/gfdl/</em><br>\n[branch \"develop\"]<br>\n    remote = origin<br>\n    merge = refs/heads/develop</p>\n<p>You are welcome to peer into my directory on CGD machines<br>\n/home/bundy/mdtf/old/MDTF-diagnostics-develop-20210701</p>",
        "id": 42140,
        "sender_full_name": "Dani Coleman",
        "timestamp": 1631201261
    },
    {
        "content": "<p><code>git diff origin develop</code> is a diff between origin/HEAD and local develop branch. <code>git diff origin/develop</code> is short for diff between branch 'remotes/origin/develop' and the current working branch. If you want to explicitly look at differences between your local develop branch and the remote origin develop branch, <code>git diff origin/develop develop</code> (at least in my preferred ordering). </p>\n<p>Now just because you have a tracking branch in git doesn't mean that it's automatically updated and synced with your local copy of the tracked branch. For example, you can checkout a remote branch with tracking and make changes and your local branch could be several commits ahead of the remote branch being tracked (or vice versa). Does this help clear anything up? You might be interested in what <code>git branch -vv</code> returns on your machine. A tracking branch is nothing more than a relationship that when a push/pull is executed, it sends it to the remotes, but still requires the push to update the remote or pull to update from the remote.</p>\n<p>So all in all, the way I read this is that you have 17 lines different from your local development branch and origin/HEAD, but that there are 9K lines difference between the remote origin/develop branch and your current working develop branch.</p>",
        "id": 42153,
        "sender_full_name": "Jared Baker",
        "timestamp": 1631207874
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"154\">@Jared Baker</span> , this is very helpful. I can see I've been missing some things conceptually.</p>\n<p>When you say </p>\n<blockquote>\n<p><code>git diff origin/develop</code><br>\nis short for diff between branch 'remotes/origin/develop' and the current working branch. </p>\n</blockquote>\n<p>did you really mean the current working <strong>branch</strong> rather than the current working <strong>directory</strong> which is what I would have assumed? Assuming you wrote correctly, do you consider those equivalent? Or are you just assuming that a good git user will have updated their local branch with the changes in their local directory. Is <code>git status</code> the only/right way to see changes between my current working directory and the branch? Is there a way to explicitly reference <code>cwd</code> in the <code>git diff</code> statement to make it use the working directory? (BTW thanks for the example showing what is being diffed against what!)</p>\n<p>As for tracking branches, thanks for  <code>git branch -vv</code> ; I like that it shows the hashes (name?) since that's the only way I know absolutely where things stand. It does make sense that my local branch can be ahead of a remote branch. I would really like to be able to check if my local directory has the most recent changes from a remote branch, but I think the <code>git diff origin/develop develop</code> will accomplish this.  One more question: is there a way to check out a branch <strong>without</strong> tracking? I kind of thought it always did, unless the head gets detached, which in my experience has happened when I checked out a remote branch without a local one (?).</p>\n<p>Thanks again!</p>",
        "id": 42246,
        "sender_full_name": "Dani Coleman",
        "timestamp": 1631222578
    },
    {
        "content": "<p>it's whatever the working branch is (directory independent, I try not to talk about directories at all when working with git unless specifying a path to a specific file). <code>git branch</code> would show you the current branch. I'm assuming that you're in a single git repository (working from the command line in whatever directory you're in; also not a submodule). IMO <code>git status</code> is really for a simple check of changes in your working copy for things not yet committed or added.  A <code>git diff</code> can take a full path, so it can be interesting. But you can reference any file you want ultimately. It's interesting to play to play with <code>git diff</code> where files may not exist in other branches. So you need to diff similar entities as well. I try to <code>git diff</code> on files with only ones in a working copy with changes rather than cross-referencing branches which I've not checked out. It's just a preference I suppose, but helps me keep things in line I suppose.</p>\n<p>As far as making an untracked branch, if you branch out locally and it's not on the remote, then it's an untracked branch. If you already have a branch that is tracked, then <code>git branch --unset_upstream</code> will basically do that.</p>",
        "id": 42249,
        "sender_full_name": "Jared Baker",
        "timestamp": 1631225419
    }
]